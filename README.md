# Egret Inspector - 白鹭游戏引擎调试工具

一个专为白鹭游戏引擎（Egret Engine）开发的 Chrome 扩展调试工具，为白鹭游戏开发者提供强大的实时调试和性能监控功能。

## 项目特性

- 🎮 **白鹭引擎专用**: 专为 Egret Engine 2.4+ 版本设计
- 🔍 **节点树查看**: 以树形结构显示游戏场景中的所有显示对象
- 📊 **属性检查器**: 实时查看和修改选中对象的所有属性
- 🎯 **交互式调试**: 支持点击阻止、对象高亮、选中点击对象等功能
- 📈 **性能监控**: 实时显示游戏帧率和性能分析
- 🎨 **美观的 UI**: 使用 @xuyanfeng/cc-ui 组件库
- 🌍 **国际化支持**: 内置中英文支持
- 🔧 **热重载开发**: 开发时实时预览
- 📦 **一键构建**: 支持开发和生产环境构建

## 核心功能

### 显示对象层次结构查看
- **节点树展示**: 以树形结构显示游戏场景中的所有显示对象
- **对象搜索**: 支持按名称和hashCode搜索特定对象
- **实时刷新**: 可手动刷新节点树获取最新状态
- **对象选择**: 点击节点可选中对应的游戏对象

### 属性检查器
- **属性查看**: 实时查看选中对象的所有属性和值
- **方法列表**: 可选择显示对象的方法列表
- **私有属性**: 支持查看和隐藏私有属性
- **属性搜索**: 快速搜索特定属性（快捷键：Ctrl/Cmd+F）
- **属性刷新**: 手动刷新属性列表

### 交互式调试功能
- **点击阻止**: 可阻止游戏中的点击事件，便于调试
- **高亮划过对象**: 鼠标划过时高亮显示对象（需按住鼠标左键）
- **选中点击对象**: 点击游戏中的对象时自动选中并显示其属性
- **对象高亮**: 优化了Container对象的高亮显示效果

### 性能监控
- **FPS显示**: 实时显示游戏帧率
- **FPS图表**: 以图表形式展示帧率变化趋势
- **性能分析**: 监控游戏运行性能

## 项目结构

```
egret-inspector/
├── src/
│   ├── main.ts                    # 插件主入口
│   ├── panel/                     # 面板相关
│   │   ├── index.ts              # 面板入口
│   │   └── index.vue             # Egret Inspector面板
│   ├── i18n/                     # 国际化
│   │   ├── en.ts                 # 英文
│   │   └── zh.ts                 # 中文
│   ├── views/                    # Chrome扩展视图
│   │   ├── popup/                # 弹窗
│   │   ├── options/              # 选项页
│   │   └── devtools/             # 开发者工具面板
│   └── scripts/                  # Chrome扩展脚本
│       ├── background/           # 后台脚本
│       ├── content/              # 内容脚本
│       └── inject/               # 注入脚本
├── cc-plugin.config.ts           # 插件配置
├── package.json                  # 项目依赖
└── README.md                     # 项目文档
```

## 快速开始

### 1. 安装依赖

```bash
cd egret-inspector
npm install
# 或者
yarn install
```

### 2. 开发模式

```bash
npm run dev
# 或者
yarn dev
```

这将启动开发服务器，支持热重载。

### 3. 构建生产版本

```bash
npm run build
# 或者
yarn build
```

构建完成后，Chrome 扩展文件将生成在 `chrome/` 目录中。

### 4. 安装到 Chrome

1. 打开 Chrome 浏览器
2. 访问 `chrome://extensions/`
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择 `chrome/` 目录

### 5. 使用 Egret Inspector

1. 在Chrome中加载该扩展
2. 打开包含Egret游戏的网页
3. 按F12打开开发者工具
4. 切换到"Egret Inspector"标签页

## 开发指南

### 添加新面板

1. 在 `src/panel/` 目录下创建新的面板文件
2. 在 `cc-plugin.config.ts` 中注册面板
3. 在 `src/main.ts` 中添加消息处理

### 添加新功能

1. 在相应的目录下创建新文件
2. 更新配置文件
3. 添加必要的类型定义

### 国际化

1. 在 `src/i18n/` 目录下添加翻译
2. 使用 `i18n()` 函数引用翻译
3. 在组件中使用翻译键

## 白鹭引擎支持

### 支持版本

- **Egret Engine 2.5**: 完全支持
- **Egret Engine 2.4+**: 支持，但高亮功能需要按住鼠标左键
- **发布后项目**: 支持调试已发布的项目

### 快捷键

- **Ctrl/Cmd+Shift+F**: 聚焦到节点搜索框
- **Ctrl/Cmd+F**: 聚焦到属性搜索框

### 调试技巧

1. 使用"阻止点击"功能可以防止误操作游戏
2. 开启"高亮划过对象"可以快速定位显示对象
3. 使用搜索功能可以快速找到特定的节点或属性
4. 观察FPS图表可以发现性能瓶颈

## 最佳实践

### 代码组织

- 使用 TypeScript 进行类型检查
- 遵循 Vue 3 Composition API 最佳实践
- 保持组件单一职责原则

### 性能优化

- 使用 Vue 3 的响应式系统
- 合理使用组件懒加载
- 优化构建包大小

### 安全性

- 验证用户输入
- 使用 CSP (Content Security Policy)
- 避免 XSS 攻击

## 技术栈

- **构建工具**: cc-plugin
- **前端框架**: Vue 3
- **语言**: TypeScript
- **UI 组件**: @xuyanfeng/cc-ui
- **样式**: Less
- **目标引擎**: Egret Engine 2.4+

## 常见问题

### Q: 如何修改插件名称？
A: 在 `cc-plugin.config.ts` 中修改 `manifest.name` 字段。

### Q: 如何添加新的权限？
A: 在 `cc-plugin.config.ts` 的 `chrome` 配置中添加相应权限。

### Q: 如何调试扩展？
A: 使用 Chrome DevTools 的扩展调试功能，或查看控制台日志。

### Q: 支持哪些版本的Egret引擎？
A: 主要支持Egret Engine 2.4及以上版本，2.5版本功能最完整。

### Q: 为什么高亮功能需要按住鼠标左键？
A: 这是Egret Engine 2.4+版本的限制，在2.5版本中已优化。

## 贡献指南

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 许可证

MIT License

## 更新日志

### v1.0.0
- 初始版本
- 基于cc-plugin框架重构
- 支持Egret Engine 2.4+版本
- 完整的Chrome扩展结构
- 现代化的Vue 3 + TypeScript架构 